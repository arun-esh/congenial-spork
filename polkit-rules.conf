# Polkit rules for AppPilot Service Management
# This file allows the appserver user to manage specific services without authentication

# Allow appserver user to manage mcp-server service
polkit.addRule(function(action, subject) {
    if (action.id == "org.freedesktop.systemd1.manage-units" &&
        subject.user == "appserver" &&
        action.lookup("unit") == "mcp-server.service") {
        return polkit.Result.YES;
    }
});

# Allow appserver user to manage mcp-service
polkit.addRule(function(action, subject) {
    if (action.id == "org.freedesktop.systemd1.manage-units" &&
        subject.user == "appserver" &&
        action.lookup("unit") == "mcp-service.service") {
        return polkit.Result.YES;
    }
});

# Allow appserver user to manage any service (alternative approach)
# polkit.addRule(function(action, subject) {
#     if (action.id == "org.freedesktop.systemd1.manage-units" &&
#         subject.user == "appserver") {
#         return polkit.Result.YES;
#     }
# });
